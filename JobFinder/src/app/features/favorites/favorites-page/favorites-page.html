<section
  class="relative isolate min-h-screen overflow-hidden bg-gradient-to-br from-[#FFF8EF] via-[#FFF2E7] to-white px-4 py-16 text-slate-900"
>
  <div class="pointer-events-none absolute inset-0 opacity-80">
    <div class="absolute -left-24 top-16 h-96 w-96 rounded-full bg-[#FFBC7D]/30 blur-3xl"></div>
    <div
      class="absolute -right-32 bottom-0 h-[28rem] w-[28rem] rounded-full bg-[#FDB4C0]/30 blur-3xl"
    ></div>
    <div class="absolute inset-x-0 top-0 h-40 bg-gradient-to-b from-white/30"></div>
  </div>

  <div class="relative mx-auto max-w-6xl space-y-10">
    <header
      class="rounded-[2.5rem] border border-white/80 bg-white/90 p-10 shadow-[0_25px_90px_-45px_rgba(15,23,42,0.25)]"
    >
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div>
          <p class="text-xs font-semibold uppercase text-amber-500">Collection privée</p>
          <h1 class="mt-3 text-4xl font-semibold text-slate-900">Mes Favoris</h1>
          <p class="mt-2 text-sm text-slate-500">
            Conservez vos inspirations du moment et déclenchez une candidature quand le timing est
            parfait.
          </p>
        </div>
        @if (favorites$ | async; as f) {
          <app-favorites-stats [count]="f.length" />
        }
      </div>
    </header>

    @if (loading$ | async) {
      <div
        class="flex flex-col items-center gap-3 rounded-[2rem] border border-amber-100 bg-amber-50/70 px-6 py-12 text-amber-700"
      >
        <div
          class="h-12 w-12 animate-spin rounded-full border-4 border-amber-200 border-t-[#FF9653]"
        ></div>
        <p class="text-sm font-semibold tracking-wide">Chargement...</p>
      </div>
    }

    @if (favorites$ | async; as allFavorites) {
      @if (allFavorites.length > 0) {
        @if (paginatedFavorites$ | async; as favorites) {
          <div class="grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4">
            @for (fav of favorites; track fav.id) {
              <app-favorite-card [favorite]="fav" (remove)="onRemove($event)" />
            }
          </div>
        }

        @if (totalPages > 1) {
          <div class="flex items-center justify-center gap-3 pt-4">
            <button
              (click)="goToPage(currentPage - 1)"
              [disabled]="currentPage === 1"
              class="rounded-[1.75rem] border border-white/80 bg-white px-5 py-2 text-sm font-semibold text-slate-900 shadow-[0_18px_45px_-28px_rgba(15,23,42,0.5)] transition hover:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-40"
            >
              Précédent
            </button>
            <span
              class="rounded-[1.75rem] bg-gradient-to-r from-[#FF9653] to-[#FF6E62] px-5 py-2 text-sm font-semibold text-white shadow-[0_15px_45px_rgba(255,140,102,0.6)]"
            >
              {{ currentPage }} / {{ totalPages }}
            </span>
            <button
              (click)="goToPage(currentPage + 1)"
              [disabled]="currentPage === totalPages"
              class="rounded-[1.75rem] border border-white/80 bg-white px-5 py-2 text-sm font-semibold text-slate-900 shadow-[0_18px_45px_-28px_rgba(15,23,42,0.5)] transition hover:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-40"
            >
              Suivant
            </button>
          </div>
        }
      } @else {
        <div class="px-6 py-12 text-center text-slate-500">
          <p class="text-base font-semibold text-slate-600">Aucun favori pour le moment.</p>
          <p class="mt-2 text-sm">Ajoutez une offre depuis la recherche pour la conserver ici.</p>
        </div>
      }
    }
  </div>
</section>
